<?xml version="1.0"?>
<project name="eAuctionClient" default="dist" basedir=".">
    <import file="${basedir}/../build.xml" />
    <target name="dist" depends="build">
        <mkdir dir="${dist}" />
        <mkdir dir="${dist}/lib" />
        <available property="modelPresent" file="../eAuctionModel/dist/eAuctionModel.jar" />
        <antcall target="buildModel" />
        <copy todir="${dist}/lib" file="../eAuctionModel/dist/eAuctionModel.jar" />
        <path id="libs">
            <fileset dir="${dist}/lib">
                <include name="**/*.jar" />
            </fileset>
        </path>
        <build src="${src}" classes="${classes}" additional-classpath="libs" />
        <copy todir="${dist}">
            <fileset dir="${classes}" />
        </copy>
        <jar basedir="${dist}" file="${dist}/${ant.project.name}.jar">
            <exclude name="${ant.project.name}.jar" />
        </jar>
    </target>
    <target name="buildModel" unless="modelPresent">
        <echo message="Building model" />
        <ant antfile="../eAuctionModel/build.xml" target="dist" inheritAll="false" />
    </target>
</project>
